---
layout: post
title: "코드 스피츠 2회차 "
author: "jinho hong"
categories: development
tags: [development, study, javascript]
image: codespitz.jpeg
---

# Parallelism

- 병행성: 이것이 진짜 "동시"에 일어나는 것
  - 어려운 이유는 동시에 같은 자원에 접근할 때
    - Lock 이외에는 해결 방법이 없음
      - 3가지 방법 : block , switch , wait
        - 자바는 wait 방식으로 강제
        - 다음 설명은 5강에서 설명함

# Concurrency

- 동시성: 엄밀하게는 "동시"에 일어나지 않음
  - 마치 동시에 일어난 것 같음
    - 시분할 컴퓨터에서 자주 언급
    - 시분할이 됨으로 동시에 같은 자원에 접근할 수 없음

```js
const Item = class {
  time;
  block;
  constructor(block, time) {
    this.block = block;
    this.time = time + performance.now();
  }
};
const queue = new Set();
const f = time => {
  queue.forEach(item => {
    if (item.time > time) return;
    queue.delete(item);
    item.blcok();
  });
  requestAnimationFrame(f);
};
requestAnimationFrame(f);

const timeout = (block, time) => queue.add(new Item(block, time));
timeout(_ => console.log("hello", 10000));
```

```js
const working = _ => {};
for (let i = 0; i < 10000; i++) {
  working();
}

const nbFor = (max, load, block) => {
  let i = 0;
  const f = time => {
    let curr = load;
    while (curr-- && i < max) {
      block();
      i++;
    }
    console.log(i);
    if (i < max - 1) requestAnimationFrame(f);
  };
  requestAnimationFrame(f);
};
```
